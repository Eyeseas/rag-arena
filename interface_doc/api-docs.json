{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8901","description":"Generated server url"}],"paths":{"/task/add":{"post":{"tags":["任务相关接口"],"summary":"添加任务","operationId":"add","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAdd"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/others/feedback":{"post":{"tags":["其他接口"],"summary":"反馈信息","operationId":"feedback","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/others/feedback/query":{"post":{"tags":["其他接口"],"summary":"外部接口调用查询","operationId":"feedbackQuery","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackQueryReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FeedbackResultVO"}}}}}}},"/conv/create":{"post":{"tags":["会话相关接口"],"summary":"创建对话","operationId":"create","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMsgReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOConvCreatedVO"}}}}}}},"/conv/chat":{"post":{"tags":["会话相关接口"],"summary":"对话开始","operationId":"chat","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMsgReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"text/event-stream":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatResponseVO"}}}}}}}},"/conv/chat/single":{"post":{"tags":["会话相关接口"],"summary":"单个聊天","operationId":"chatSingle","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMsgReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"text/event-stream":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatResponseVO"}}}}}}}},"/conv/chat/pri":{"post":{"tags":["会话相关接口"],"summary":"私聊","operationId":"chatPri","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMsgReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"text/event-stream":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatResponseVO"}}}}}}}},"/task/rename":{"get":{"tags":["任务相关接口"],"summary":"修改任务名称","operationId":"rename","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"title","in":"query","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/task/list":{"get":{"tags":["任务相关接口"],"summary":"根据用户ID罗列其所有的任务","operationId":"list","parameters":[{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOListCommonTreeDict"}}}}}}},"/task/del":{"get":{"tags":["任务相关接口"],"summary":"修改任务名称","operationId":"del","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/others/ref/detail":{"get":{"tags":["其他接口"],"summary":"查看引用文档","operationId":"refDetail","parameters":[{"name":"refId","in":"query","required":true,"schema":{"type":"string"}},{"name":"priId","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOReferenceDetailVO"}}}}}}},"/conv/unlike":{"get":{"tags":["会话相关接口"],"summary":"取消点赞","operationId":"unlike","parameters":[{"name":"priId","in":"query","description":"根据会话ID计算来的唯一ID","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","description":"用户ID","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/conv/rename":{"get":{"tags":["会话相关接口"],"summary":"修改会话名称","operationId":"rename_1","parameters":[{"name":"sessionId","in":"query","required":true,"schema":{"type":"string"}},{"name":"title","in":"query","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/conv/like":{"get":{"tags":["会话相关接口"],"summary":"点赞","operationId":"like","parameters":[{"name":"priId","in":"query","description":"根据会话ID计算来的唯一ID","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","description":"用户ID","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}},"/conv/his":{"get":{"tags":["会话相关接口"],"summary":"历史记录","operationId":"his","parameters":[{"name":"sessionId","in":"query","required":true,"schema":{"type":"string"}},{"name":"priId","in":"query","required":false,"schema":{"type":"string"}},{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOHistoryChatVO"}}}}}}},"/conv/del":{"get":{"tags":["会话相关接口"],"summary":"删除会话","operationId":"del_1","parameters":[{"name":"sessionId","in":"query","required":true,"schema":{"type":"string"}},{"name":"userId","in":"header","required":false,"schema":{"type":"string","default":"mamba"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultDTOBoolean"}}}}}}}},"components":{"schemas":{"TaskAdd":{"title":"任务新增类","type":"object","properties":{"title":{"title":"任务名称","type":"string"},"description":{"title":"任务描述","type":"string"},"supportUnit":{"title":"支撑单位","type":"string"},"busDir":{"title":"业务方向","type":"string"},"workGoal":{"title":"工作目标","type":"string"}}},"ResultDTOBoolean":{"title":"通用结果返回类","type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"type":"boolean"}}},"FeedbackReq":{"title":"反馈请求体","type":"object","properties":{"priId":{"title":"私有ID","type":"string"},"comments":{"title":"评论","type":"array","items":{"title":"评论","type":"string"}}}},"FeedbackQueryReq":{"title":"反馈查询请求","type":"object","properties":{"provider":{"title":"模型厂商","type":"string"},"start_time":{"title":"查询开始时间","type":"string","format":"date-time"},"end_time":{"title":"查询结束时间","type":"string","format":"date-time"}}},"ChatCitation":{"title":"引用来源","type":"object","properties":{"id":{"title":"引用标识ID","type":"string"},"summary":{"title":"引用的摘要内容","type":"string"},"start_time":{"title":"通话开始时间","type":"string","format":"date-time"},"duration":{"title":"通话时长,单位:秒","type":"integer","format":"int32"},"callnumber":{"title":"主叫号码","type":"string"},"callednumber":{"title":"被叫号码","type":"string"},"labels":{"title":"相关标签,用|分割","type":"string"}}},"FeedbackComment":{"title":"反馈评价","type":"object","properties":{"liked":{"title":"点赞","type":"boolean"},"comments":{"title":"评价","type":"array","items":{"title":"评价","type":"string"}}}},"FeedbackResultItem":{"title":"反馈结果项","type":"object","properties":{"session_id":{"title":"会话ID","type":"string"},"question":{"title":"问题","type":"string"},"gmt_begin":{"title":"开始时间","type":"string","format":"date-time"},"gmt_end":{"title":"结束时间","type":"string","format":"date-time"},"answer":{"title":"回答","type":"string"},"citations":{"title":"附件信息","type":"array","items":{"$ref":"#/components/schemas/ChatCitation"}},"feedback":{"$ref":"#/components/schemas/FeedbackComment"}}},"FeedbackResultVO":{"title":"查询反馈接口","type":"object","properties":{"provider":{"title":"厂商名称","type":"string"},"items":{"title":"反馈结果","type":"array","items":{"$ref":"#/components/schemas/FeedbackResultItem"}}}},"ChatMessage":{"type":"object","properties":{"role":{"type":"string"},"content":{"type":"string"}}},"ChatMsgReq":{"title":"对话请求","required":["taskId"],"type":"object","properties":{"taskId":{"type":"string"},"priId":{"type":"string"},"messages":{"type":"array","items":{"$ref":"#/components/schemas/ChatMessage"}},"session_id":{"type":"string"},"start_time":{"type":"string","format":"date-time"},"end_time":{"type":"string","format":"date-time"}}},"ConvCreatedVO":{"title":"会话创建返回类","type":"object","properties":{"sessionId":{"title":"会话ID","type":"string"},"priIdMapping":{"title":"私有会话ID映射 私有ID,模型code","type":"object","additionalProperties":{"title":"私有会话ID映射 私有ID,模型code","type":"string"}}}},"ResultDTOConvCreatedVO":{"title":"通用结果返回类","type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/ConvCreatedVO"}}},"ChatChoice":{"title":"聊天返回","type":"object","properties":{"index":{"type":"integer","format":"int32"},"delta":{"$ref":"#/components/schemas/ChatDelta"},"finish_reason":{"type":"string"}}},"ChatDelta":{"type":"object","properties":{"content":{"type":"string"}}},"ChatResponseVO":{"title":"对话响应类","type":"object","properties":{"session_id":{"type":"string"},"object":{"type":"string"},"created":{"type":"integer","format":"int64"},"choices":{"type":"array","items":{"$ref":"#/components/schemas/ChatChoice"}},"citations":{"type":"array","items":{"$ref":"#/components/schemas/ChatCitation"}},"maskName":{"type":"string"},"maskCode":{"type":"string"},"privateId":{"type":"string"}}},"CommonTreeDict":{"type":"object","properties":{"id":{"type":"string"},"val":{"type":"string"},"leaf":{"type":"boolean"}}},"ResultDTOListCommonTreeDict":{"title":"通用结果返回类","type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/CommonTreeDict"}}}},"KeyElements":{"title":"关键要素","type":"object","properties":{"persons":{"title":"人物数组","type":"array","items":{"title":"人物数组","type":"string"}},"organizations":{"title":"组织数组","type":"array","items":{"title":"组织数组","type":"string"}},"events":{"title":"事件数组","type":"array","items":{"title":"事件数组","type":"string"}},"others":{"title":"其余元素数组","type":"array","items":{"title":"其余元素数组","type":"string"}}}},"ReferenceDetailVO":{"title":"引用详情信息","type":"object","properties":{"ref_id":{"title":"引用的标识ID","type":"string"},"content":{"title":"转写内容json数组的字符串化","type":"string"},"trans":{"title":"翻译内容数组的字符串化。","type":"string"},"time_point":{"title":"时间点，单位：秒。","type":"integer","format":"int64"},"key_elements":{"$ref":"#/components/schemas/KeyElements"}}},"ResultDTOReferenceDetailVO":{"title":"通用结果返回类","type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/ReferenceDetailVO"}}},"ChatRespWithLikedVO":{"type":"object","properties":{"session_id":{"type":"string"},"object":{"type":"string"},"created":{"type":"integer","format":"int64"},"choices":{"type":"array","items":{"$ref":"#/components/schemas/ChatChoice"}},"citations":{"type":"array","items":{"$ref":"#/components/schemas/ChatCitation"}},"maskName":{"type":"string"},"maskCode":{"type":"string"},"privateId":{"type":"string"},"liked":{"type":"boolean"}}},"HistoryChatVO":{"title":"历史记录信息","type":"object","properties":{"sessionId":{"type":"string"},"question":{"type":"string"},"chatMap":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/ChatRespWithLikedVO"}}}}},"ResultDTOHistoryChatVO":{"title":"通用结果返回类","type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/HistoryChatVO"}}}}}}