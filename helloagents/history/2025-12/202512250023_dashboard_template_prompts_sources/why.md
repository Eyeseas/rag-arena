# 变更提案: Dashboard 模板完善（Prompt 库与引用来源面板）

## 需求背景
当前项目作为“仅前端的 dashboard 模板”，已经具备 Arena 示例（提问、多模型回答、引用展示、投票）与会话侧边栏。但在常见的评测/复盘流程中仍存在两类效率问题：
1) 缺少可复用的 Prompt 模板库，用户需要反复手写相似提问；
2) 引用信息分散在各个答案卡片内，缺少聚合/对比的“引用来源面板”来集中查看与跳转。

## 产品分析

### 目标用户与场景
- **用户群体:** 需要频繁提问并对比回答/证据的产品、研发、评测人员
- **使用场景:** 快速套用常用 Prompt；集中查看引用来源并打开链接核验
- **核心痛点:** Prompt 复用成本高；引用来源不便聚合对比

### 价值主张与成功指标
- **价值主张:** 通过 Prompt 库提升提问效率，通过引用来源面板提升核验与对比效率
- **成功指标:**
  - 用户可在侧边栏/面板中一键选择 Prompt 并填入输入框
  - 用户可打开“引用来源面板”，按模型/全部聚合查看引用，并可点击跳转来源链接
  - 功能保持“仅前端”定位，不引入后端依赖

### 人文关怀
Prompt 与引用内容默认仅在浏览器内使用，不上传、不扩散；面板链接跳转使用显式点击触发，避免误触打开外部站点。

## 变更内容
1. 新增 Prompt 库面板（使用 `@ant-design/x` 的 `Prompts` 组件）
2. 新增引用来源面板（使用 `@ant-design/x` 的 `Sources` 组件），支持“全部/按模型”查看与链接跳转
3. 调整输入组件为可受控模式，以支持“点击 Prompt 填入输入框”的交互

## 影响范围
- **模块:** arena / components / routes / lib（新增 prompts 定义）
- **文件:** `src/routes/index.tsx`、`src/components/arena/*`、`src/lib/*`
- **API:** 无新增后端 API
- **数据:** 默认不新增持久化数据（Prompt 库为内置模板）

## 核心场景

### 需求: Prompt 库快速填入
**模块:** arena
用户点击 Prompt 项目后，输入框自动填入 Prompt 文本（若已有输入需确认覆盖）。

#### 场景: 覆盖输入确认
当输入框已有内容时点击 Prompt。
- 弹出确认对话框
- 确认后覆盖输入内容

### 需求: 引用来源面板聚合查看
**模块:** arena
用户可打开引用来源面板，按“全部/按模型”聚合查看引用，并可点击打开来源链接。

#### 场景: 按模型查看引用
用户切换到模型 Tab。
- 仅展示该模型的引用列表
- 点击条目跳转到来源

## 风险评估
- **风险:** Prompt 覆盖导致误操作
  - **缓解:** 非空时弹确认
- **风险:** 外部链接跳转安全
  - **缓解:** 使用 `target="_blank" rel="noopener noreferrer"`

